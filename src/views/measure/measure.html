<div class="view measure" ng-show="!isLoading">
	<div class="col-md-3 left-pane">
		<div ng-if="(selectedTab === 'content-details')">
			<div class="input-group">
				<input type="text" class="form-control" placeholder="Search" ng-model="search.searchTerm" ng-change="search.changeSearchTerm()" />
				<span class="input-group-addon">
					<span class="glyphicon glyphicon-search"></span>
				</span>
			</div>
		
			<div class="filter-panel">
				Filters
			</div>

			<accordion close-others="false">
				<accordion-group is-open="contentTypeOpen">
					<accordion-heading>
						<i class="fa" ng-class="{'fa-caret-down': contentTypeOpen, 'fa-caret-right': !contentTypeOpen}"></i>
						Content Type
						<span class="filter-slection-counter" ng-show="search.contentTypes.length > 0">(showing {{ search.contentTypes.length }} of {{ contentTypes.length }})</span>
						<span class="filter-slection-counter" ng-show="search.contentTypes.length === 0">(showing all)</span>
					</accordion-heading>
					<div>
						<select id="selContentType" name="selContentType" class="multi-select" multiple="multiple"
								ui-select2="{ formatResult: formatContentTypeItem, formatSelection: formatContentTypeItem }" ng-model="search.contentTypes"
								ng-change="search.applyFilter()" data-placeholder="Select Content Types">
							<option ng-repeat="ct in contentTypes" value="{{ ct.name }}">{{ ct.title }}</option>
						</select>
					</div>
				</accordion-group>
				<accordion-group is-open="campaignOpen">
					<accordion-heading>
						<i class="fa" ng-class="{'fa-caret-down': campaignOpen, 'fa-caret-right': !campaignOpen}"></i>
						Campaign
						<span class="filter-slection-counter" ng-show="search.campaigns.length > 0">(showing {{ search.campaigns.length }} of {{ campaigns.length }})</span>
						<span class="filter-slection-counter" ng-show="search.campaigns.length === 0">(showing all)</span>
					</accordion-heading>
					<div>
						<select id="selCampaign" name="selCampaign" class="multi-select" multiple="multiple"
								ui-select2="{ formatResult: formatCampaignItem, formatSelection: formatCampaignItem }" ng-model="search.campaigns"
								ng-change="search.applyFilter()" data-placeholder="Select Campaign">
							<option ng-repeat="c in campaigns" value="{{ c.id }}" data-color="{{ c.color }}">{{ c.title }}</option>
						</select>
					</div>
				</accordion-group>
				<accordion-group is-open="contentCreatorOpen">
					<accordion-heading>
						<i class="fa" ng-class="{'fa-caret-down': contentCreatorOpen, 'fa-caret-right': !contentCreatorOpen}"></i>
						Creator
						<span class="filter-slection-counter" ng-show="search.users.length > 0">(showing {{ search.users.length }} of {{ users.length }})</span>
						<span class="filter-slection-counter" ng-show="search.users.length === 0">(showing all)</span>
					</accordion-heading>
					<div>
						<select id="selCreator" name="selCreator" class="multi-select" multiple="multiple"
								ui-select2="{ formatResult: formatUserItem, formatSelection: formatUserItem }" ng-model="search.users"
								ng-change="search.applyFilter()" data-placeholder="Select Creator">
							<option ng-repeat="u in users" value="{{ u.id }}">{{ u.formatName() }}</option>
						</select>
					</div>
				</accordion-group>
			</accordion>
		
			<div class="link-button-container">
				<a class="link-button" href="#" ng-click="saveFilter()">Save as default filters</a> |
				<a class="link-button" href="#" ng-click="search.clearFilter()">Clear Filters</a>
			</div>
		</div>
	</div>
	<div class="col-md-9 right-pane">
		<h2 class="right-pane-header">Measure</h2>

		<div class="measure-editor row">
			<div class="measure-header">
				<div class="btn-group">
					<button type="button" class="btn btn-default" ng-class="{ active: (selectedTab === 'overview') }" ng-click="selectTab('overview')">Overview</button>
					<button type="button" class="btn btn-default" ng-class="{ active: (selectedTab === 'creation-stats') }" ng-click="selectTab('creation-stats')">Creation Stats</button>
					<button type="button" class="btn btn-default" ng-class="{ active: (selectedTab === 'content-trends') }" ng-click="selectTab('content-trends')">Content Trends</button>
					<button type="button" class="btn btn-default" ng-class="{ active: (selectedTab === 'content-details') }" ng-click="selectTab('content-details')">Content Details</button>
					<button type="button" class="btn btn-default" ng-class="{ active: (selectedTab === 'marketing-automation') }" ng-click="selectTab('marketing-automation')">Marketing Automation</button>
				</div>
			</div>

			<div class="measure-overview" ng-include="'/assets/views/measure/measure-overview.html'" ng-if="(selectedTab === 'overview')"></div>
			<div class="measure-creation-stats" ng-include="'/assets/views/measure/measure-creation-stats.html'" ng-if="(selectedTab === 'creation-stats')"></div>
			<div class="measure-content-trends" ng-include="'/assets/views/measure/measure-content-trends.html'" ng-if="(selectedTab === 'content-trends')"></div>
			<div class="measure-content-details" ng-include="'/assets/views/content/partials/table-list.html'" ng-if="(selectedTab === 'content-details')"></div>
			<div class="measure-marketing-automation" ng-include="'/assets/views/measure/measure-marketing-automation.html'" ng-if="(selectedTab === 'marketing-automation')"></div>
		</div>
	</div>
</div>

<div class="loading-spinner-container" ng-show="isLoading">
	<spinner spin="{ length: 50, width: 10, radius: 30 }"></spinner>
</div>
