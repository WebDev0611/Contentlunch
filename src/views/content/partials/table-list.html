<div class="create-header">
	<h3 ng-hide="isMeasure">
		<span ng-show="isPromote">Promote</span>
		Content
	</h3>
    
    <div class="btn-group" ng-show="canViewContent && !isPromote && !isMeasure">
        <button class="btn btn-default" ng-class="{ active: search.contentStage === 'content' }" ng-click="search.toggleContentStage('content')" ng-show="canViewContent">Content</button>
        <button class="btn btn-default" ng-class="{ active: search.contentStage === 'concepts' }" ng-click="search.toggleContentStage('concepts')" ng-show="canViewConcepts">Concepts</button>
        <button class="btn btn-default" ng-class="{ active: search.contentStage === 'archived' }" ng-click="search.toggleContentStage('archived')" ng-show="canViewContent">Archived</button>
    </div>
    
    <div class="create-download" ng-hide="isPromote || isMeasure">
        <a class="btn btn-default fa fa-download" target="_blank" href="/api/account/{{ user.account.id }}/content/export-csv"></a>
    </div>

    <div class="create-delete" ng-show="canDeleteContent">
        <button type="button" class="btn btn-default fa fa-trash-o" ng-click="deleteSelected()"></button>
    </div>
	
	<div class="create-paging-controls" ng-show="pagination.totalItems > 5">
        <div class="form-group form-inline">
            <label class="control-label" for="selPageSize">Items per page:</label>
            <select class="form-control" id="selPageSize" name="selPageSize" ng-model="pagination.pageSize" ng-change="pagination.groupToPages()">
                <option value="5">5</option>
                <option value="10">10</option>
                <option value="20">20</option>
                <option value="50">50</option>
                <option value="100">100</option>
            </select>
        </div>

        <div style="width: 100px; text-align: center;">
            {{ pagination.getPageIndicator() }}
        </div>

		<div class="create-pager" ng-show="pagination.totalItems > pagination.pageSize">
			<pagination
				total-items="pagination.totalItems"
				items-per-page="pagination.pageSize"
				page="pagination.currentPage"
				on-select-page="pagination.onPageChange(page, editUser)"
				direction-links="true"
				max-size="0">
			</pagination>
		</div>
    </div>
</div>

<div class="create-table-container">
	<table class="create-table">
		<thead>
			<tr>
				<th class="small-cell" ng-show="canDeleteContent">&nbsp;</th>
				<th ng-show="isMeasure">
					<span class="fa" ng-show="pagination.currentSort === 'contentscore'" ng-class="'fa-sort-alpha-' + pagination.currentSortDirection"></span>
					<span class="clickable-header" ng-click="applySort('contentscore')">Content Score</span>
				</th>
				<th class="small-cell">&nbsp;</th>
				<th>
					<span class="fa" ng-show="pagination.currentSort === 'title'" ng-class="'fa-sort-alpha-' + pagination.currentSortDirection"></span>
					<span class="clickable-header" ng-click="applySort('title')">Title</span>
				</th>
				<th>
					<span class="fa" ng-show="pagination.currentSort === 'author'" ng-class="'fa-sort-alpha-' + pagination.currentSortDirection"></span>
					<span class="clickable-header" ng-click="applySort('author')">Author</span>
				</th>
				<th ng-show="isMeasure">
					<span class="fa" ng-show="pagination.currentSort === 'launchdate'" ng-class="'fa-sort-alpha-' + pagination.currentSortDirection"></span>
					<span class="clickable-header" ng-click="applySort('launchdate')">Launch Date</span>
				</th>
				<th ng-hide="search.contentStage === 'concepts' || isMeasure">
					<span class="fa" ng-show="pagination.currentSort === 'persona'" ng-class="'fa-sort-alpha-' + pagination.currentSortDirection"></span>
					<span class="clickable-header" ng-click="applySort('persona')">Persona</span>
				</th>
				<th style="text-align: center;" ng-hide="search.contentStage === 'concepts' || isMeasure">
					<span class="fa" ng-show="pagination.currentSort === 'buyingstage'" ng-class="'fa-sort-alpha-' + pagination.currentSortDirection"></span>
					<span class="clickable-header" ng-click="applySort('buyingStage')">Buying Stage</span>
				</th>
				<th ng-hide="isMeasure">
					<span class="fa" ng-show="pagination.currentSort === 'currentstep'" ng-class="'fa-sort-numeric-' + pagination.currentSortDirection"></span>
					<span class="clickable-header" ng-click="applySort('currentStep')">Current Step</span>
				</th>
				<th ng-show="isPromote || isMeasure">
					<span class="fa" ng-show="pagination.currentSort === 'promotedate'" ng-class="'fa-sort-alpha-' + pagination.currentSortDirection"></span>
					<span class="clickable-header" ng-click="applySort('promotedate')">Promotion</span>
				</th>
			</tr>
		</thead>
		<tbody>
			<tr ng-repeat="c in pagedContent[pagination.currentPage - 1]" ng-class-odd="'dark'" ng-click="editContent(c, $event)">
				<td class="small-cell" ng-show="canDeleteContent">
					<input type="checkbox" class="form-control" ng-model="c.isSelected" ng-click="$event.stopPropagation()" />
				</td>
				<td ng-show="isMeasure" class="content-score">{{ c.contentScore }}</td>
				<td class="small-cell"><div class="campaign-dot campaign-dot-small" style="background-color: {{ c.campaign.color }}"></div></td>
				<td>
					<span class="cl-icon" ng-class="formatContentTypeIcon(c.contentType.name)"></span>
					{{ c.title }}
				</td>
				<td>
					<span class="user-image user-image-small" ng-style="{ 'background-image': c.author.imageUrl() }"></span>
					{{ c.author.formatName() }}
				</td>
				<td ng-show="isMeasure">{{ formatDate(c.launchDate) }}</td>
				<td ng-hide="search.contentStage === 'concepts' || isMeasure">{{ c.persona }}</td>
				<td style="text-align: center;" ng-hide="search.contentStage === 'concepts' || isMeasure"><span class="cl-icon" ng-class="'cl-icon-personas-' + c.buyingStage"></span></td>
				<td ng-hide="isMeasure">
					<span class="cl-icon cl-icon-workflow" ng-class="formatWorkflowItem(c.currentStep())"></span>
					<span ng-bind="formatWorkflowTitle(c.currentStep())"></span>
				</td>
				<td class="promote" ng-show="isPromote || isMeasure">
					<button class="btn btn-promote" ng-show="!c.promoteDate" ng-click="viewInPromote(c, $event)">
						<span class="cl-icon cl-icon-small cl-icon-white cl-icon-workflow-promote"></span>
						Promote
					</button>
					<span ng-show="!!c.promoteDate" ng-click="viewInPromote(c, $event)">
						<span class="fa fa-check"></span>
						Promoted
					</span>
				</td>
			</tr>
		</tbody>
	</table>
</div>